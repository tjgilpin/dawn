{% comment %}
    Renders a collection card

    Accepts:
    - collection: {Object} Collection Liquid object (optional)
    - media_size: {String} Size of the product image card. Values are "square" and "portrait". Default is "square" (optional)
    - add_image_padding: {Boolean} Enables padding on the image to space out the grid
    - heading_color
    - heading_font_size
    - content_color
    - content_font_size
    - padding
    - margin

    Usage:
    {% render 'collection-card', collection: block.settings.collection %}
{% endcomment %}

<div class="relative h-full p-{{ padding }} m-{{ margin }} border-gray-200 card-wrapper group {% if settings.show_grid_border %} border-r border-b {% endif %} ">
  <a href="{{ collection.url | default: '#' }}">
    <span class="visually-hidden">{{ collection.title | escape }}</span>

    <div class="card card--collection {% if collection.image == nil %} card--text-only card--soft{% endif %}" tabindex="-1">
      <div class="card__inner">
        {%- if collection.image -%}
          {%- liquid
            assign image_aspect_ratio = collection.image.aspect_ratio

            if collection.image.aspect_ratio == nil
              assign image_aspect_ratio = 1
            endif
          -%}

          <div{% if add_image_padding %} class="card__media-full-spacer"{% endif %}>
            <div class="media media--transparent media--{{ media_size }} media--hover-effect"
              {% if media_size == 'adapt' and collection.image %} style="padding-bottom: {{ 1 | divided_by: image_aspect_ratio | times: 100 }}%;"{% endif %}
            >
              <img srcset="{%- if collection.image.width >= 165 -%}{{ collection.image | image_url: '165x' }} 165w,{%- endif -%}
                {%- if collection.image.width >= 360 -%}{{ collection.image | image_url: '360x' }} 360w,{%- endif -%}
                {%- if collection.image.width >= 533 -%}{{ collection.image | image_url: '533x' }} 533w,{%- endif -%}
                {%- if collection.image.width >= 720 -%}{{ collection.image | image_url: '720x' }} 720w,{%- endif -%}
                {%- if collection.image.width >= 940 -%}{{ collection.image | image_url: '940x' }} 940w,{%- endif -%}
                {%- if collection.image.width >= 1066 -%}{{ collection.image | image_url: '1066x' }} 1066w{%- endif -%}"
                src="{{ collection.image | image_url: '533x' }}"
                sizes="(min-width: 1100px) 535px, (min-width: 750px) calc((100vw - 130px) / 2), calc((100vw - 50px) / 2)"
                alt="{{ collection.image.alt | escape }}"
                loading="lazy"
                class="motion-reduce"
                width="{{ collection.image.width }}"
                height="{{ collection.image.height }}"
              >
            </div>
          </div>
        {%- else -%}
          <div class="card-content">
            <span class="text-{{ heading_font_size }} text-{{ heading_color }}">
              {{ collection.title }}
            </span>
          </div>
        {%- endif -%}
      </div>
    </div>

    <div class="card-information">
      {%- if block.settings.collection.description != blank -%}
        <p class="card__caption">
          
          {{- block.settings.collection.description | strip_html | truncatewords: 12 -}}<span class="icon-wrap">&nbsp;{% render 'icon-arrow' %}</span>
        </p>
      {%- endif -%}
      {%- if collection.image -%}
        <span class="text-{{ heading_font_size }} text-{{ heading_color }}">
          {{ collection.title }}
        </span>
      {%- endif -%}
    </div>
  </a>
</div>
